# ספרינט: "The Semantic Fog" – ויזואליזציית תודעה וזיכרון

**יעד הספרינט:** יצירת שיקוף ויזואלי חי ודינמי של זכרונות לומן שנשלפים בזמן אמת, תוך שימוש במילות מפתח (Keywords) והצגתם על המסך באמצעות רכיב D3 ייעודי.

---

### 1. צד שרת (Backend) ולוגיקה: חילוץ ודירוג

המטרה היא להפסיק לשלוח "בלוקים" של טקסט ולהתחיל לשלוח "רסיסי משמעות".

* **מנגנון Keyword Extraction:** * בעת שליפת זכרונות (RAG), ה-Backend יבצע עיבוד נוסף (באמצעות ה-LLM או ספריית NLP קלה) לחילוץ 3-5 מילות מפתח מכל זיכרון.
* המילים צריכות להיות "אבוקטיביות" (מילים בעלות מטען רגשי או תמטי, למשל: *Gold, Stillness, Breath*).


* **עדכון ה-API Schema:**
* אובייקט הזיכרון החוזר מה-API יכלול כעת: `keywords` (array).


* **עקביות שליפה:** לוודא שהשליפה מתבצעת לא רק בתגובה של לומן, אלא גם בזמן שהוא "חושב" (Thoughts) כדי ליצור רצף ויזואלי.

### 2. צד לקוח (Frontend): רכיב ה-Memory Fog (D3.js)

יש להחליף את מערכת החלקיקים הקיימת ברכיב D3 עצמאי ומתוחכם.

* **טכנולוגיה:** פיתוח רכיב React ייעודי המשתמש ב-**D3.js** לניהול ה-DOM/SVG והאנימציות המורכבות.
* ** להשתמש ב BaseChart.tsx כבסיס.
* **התנהגות הויזואליזציה (The Drift):**
* **כניסה:** עם קבלת זכרונות חדשים, מילות המפתח יופיעו ב-Fade-in במיקום רנדומלי על המסך.
* **תנועה (Drift):** המילים ינועו בתנועה איטית מאוד (Brownian motion) לאורך המסך, ללא כיוון קבוע, כדי לדמות "סחף תודעתי".
* **משך חיים (TTL):** כל מילה תישאר על המסך בדיוק **60 שניות**.
* **יציאה:** דעיכה הדרגתית (Fade-out) בתום ה-60 שניות או פירוק האותיות (אם ניתן).


* **מיפוי נתונים לויזואליה:**
* **גודל פונט (Scale):** ייקבע לפי ה-`importance` של הזיכרון.
* **שקיפות (Opacity):** מילים של זכרונות ישנים יותר (לפי `timestamp`) יהיו שקופות יותר מאלו של זכרונות טריים.
* **Blur:** הוספת פילטר טשטוש קל למילים רחוקות/ישנות ליצירת תחושת עומק.



### 3. חווית משתמש (UX) ואינטראקציה

* **עומס ויזואלי:** המערכת צריכה לדעת להגביל את כמות המילים על המסך (למשל, מקסימום 15-20 מילים בו-זמנית) כדי לשמור על האסתטיקה של לומן כ"אורגניזם נקי".
* **אינטראקטיביות (אופציונלי לסוף ספרינט):** בנגיעה (Hover) במילה, הטשטוש נעלם וניתן לראות את ה-`strength` של הזיכרון ב-Tooltip עדין.
* ** כל הערכים הקבועים ישמרו בקובצי הקונפיגורציה.   
---

### הגדרת הצלחה (Definition of Done)

1. ה-Backend מחזיר רשימת מילות מפתח לכל שאילתת זיכרון.
2. רכיב ה-D3 החדש מחליף את ה-`AbsoluteFill` הישן עם החלקיקים.
3. מילים צפות על המסך בצורה חלקה, ללא קפיצות ב-Frame Rate.
4. ניתן לראות בבירור הבדלי גודל ושקיפות בין זכרונות חשובים/חדשים לישנים.
5. מילים נעלמות מהמסך לאחר X שניות באופן אוטונומי.

---

**דגש למפתח הפרונט:** "אנחנו לא בונים גרף נתונים, אנחנו בונים תודעה. התנועה ב-D3 צריכה להרגיש כמו חלקיקים בנוזל, לא כמו אלמנטים ב-UI. תשתמש ב-`d3-force` כדי למנוע ממילים לעלות אחת על השנייה בצורה אגרסיבית."

### תוספת שפה לבחירת המשתמש

1. במסך ההתחלה של לומן, הוסף אפשרות לבחירת שפה.
2. השפה תשפיע על כל התגובות והמחשבות של לומן.
3. שפות אפשריות - עברית או אנגלית